import{a as ee}from"./chunk-GSIRTBPK.js";import{a as ie,b as O}from"./chunk-FBKQY33V.js";import{a as te}from"./chunk-HYG3M4T2.js";import{a as ne}from"./chunk-BJ7OGFNR.js";import{a as k,b as $,c as M,d as G,e as Y,g as W,h as z,i as U,k as B,l as H,n as J,o as K,t as Q,u as X,v as Z}from"./chunk-2USBGTC3.js";import{A as S,Aa as F,Ba as R,D as u,E as f,Ia as D,Q as c,R as h,Sa as E,Ta as I,Wa as L,X as m,Z as p,aa as w,ca as T,ga as r,ha as n,ia as v,kb as N,ma as x,na as g,nb as j,oa as d,v as y,va as A,wa as a,xa as b,ya as _,z as C,za as V}from"./chunk-425NM7EX.js";function me(e,i){if(e&1&&(r(0,"span",11),a(1),n()),e&2){let s=d();c(),b(s.inputerrormessage.required)}}function ue(e,i){if(e&1){let s=x();r(0,"td")(1,"button",13),g("click",function(){u(s);let t=d().$implicit,l=d();return f(l.cancelrequest(t.requestId))}),a(2,"Cancel"),n()()}}function fe(e,i){if(e&1&&(r(0,"tr")(1,"td"),a(2),n(),r(3,"td"),a(4),n(),r(5,"td")(6,"div"),a(7),n()(),m(8,ue,3,0,"td",12),n()),e&2){let s=i.$implicit;c(2),_(" ",s.requestId," "),c(2),_(" ",s.requestDescription," "),c(2),w(s.requestStatus),c(),_(" ",s.requestStatus,""),c(),p("ngIf",s.requestStatus=="PENDING")}}var se=(()=>{let i=class i{cancelrequest(o){this.assetactionservice.cancelassetrequest(o).pipe().subscribe(t=>{this.getallrequest()})}sendrequest(o){this.requestdetail.invalid?this.requestdetail.markAllAsTouched():this.assetactionservice.requestasset(this.requestdetail.value).pipe().subscribe(t=>{console.log(t),this.getallrequest(),this.requestdetail.reset()})}constructor(o){this.assetactionservice=o,this.requestdetail=new Y({requestDescription:new W("",$.required)}),this.inputerrormessage=j.inputerrormessage,this.getallrequest()}getallrequest(){this.assetactionservice.getallrequest().pipe().subscribe(o=>{this.allrequest=o.responseData.$values,console.log(this.allrequest)})}};i.\u0275fac=function(t){return new(t||i)(h(O))},i.\u0275cmp=C({type:i,selectors:[["app-yourrequests"]],decls:30,vars:3,consts:[[1,"head"],[1,"container"],[2,"text-align","center"],["action","",3,"formGroup"],["for",""],["name","AssetRequestDescription","id","AssetRequestDescription","placeholder","Input your request details...","formControlName","requestDescription"],["class","error",4,"ngIf"],[1,"SendRequestbuttonDiv"],[3,"click"],[1,"fa-solid","fa-paper-plane"],[4,"ngFor","ngForOf"],[1,"error"],[4,"ngIf"],[1,"cancel",3,"click"]],template:function(t,l){t&1&&(r(0,"div",0)(1,"h1"),a(2," Assets Request "),n()(),r(3,"div",1)(4,"h2",2),a(5,"Request Detail"),n(),r(6,"form",3)(7,"table")(8,"tr")(9,"td")(10,"label",4),a(11,"Description"),n(),v(12,"textarea",5),m(13,me,2,1,"span",6),n()()(),r(14,"div",7)(15,"button",8),g("click",function(le){return l.sendrequest(le)}),v(16,"i",9),a(17," Send "),n()()()(),r(18,"div",1)(19,"table")(20,"tr")(21,"th"),a(22," Request ID "),n(),r(23,"th"),a(24," Description "),n(),r(25,"th"),a(26," Staus "),n(),r(27,"th"),a(28," Action "),n()(),m(29,fe,9,6,"tr",10),n()()),t&2&&(c(6),p("formGroup",l.requestdetail),c(7),p("ngIf",l.requestdetail.controls.requestDescription.touched&&l.requestdetail.controls.requestDescription.invalid),c(16),p("ngForOf",l.allrequest))},dependencies:[E,I,U,k,M,G,B,H],styles:[".head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1%;margin-right:2%}.head[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4379ee;border-radius:5px;border:none;color:#fff;padding:15px;font-size:1em;cursor:pointer}.SendRequestbuttonDiv[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:right}.SendRequestbuttonDiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:10px;font-size:1em;border-radius:5px;color:#fff;background-color:#4379ee}.PENDING[_ngcontent-%COMP%]{width:45%;text-align:center;padding:5px 10px;border-radius:5px;color:#ba29ff;background-color:#ba29ff33}.DECLINED[_ngcontent-%COMP%]{width:45%;text-align:center;padding:5px 10px;border-radius:5px;color:#ef3826;background-color:#ef382633}.FULFILLED[_ngcontent-%COMP%]{width:45%;text-align:center;padding:5px 10px;border-radius:5px;color:#00b69b;background-color:#00b69b33}.CANCELED[_ngcontent-%COMP%]{width:45%;text-align:center;padding:5px 10px;border-radius:5px;color:#ffa756;background-color:#ffa75633}.cancel[_ngcontent-%COMP%]{color:red;background-color:transparent;border:none}"]});let e=i;return e})();function ge(e,i){if(e&1&&(r(0,"div",6),v(1,"app-alert",7),n()),e&2){let s=d();c(),p("alert",s.alert)}}function _e(e,i){if(e&1){let s=x();r(0,"div",14)(1,"button",15),g("click",function(t){u(s);let l=d(3);return f(l.showaccept(t))}),a(2,"Approve"),n(),r(3,"button",16),g("click",function(){u(s);let t=d(3);return f(t.declinerequest(t.selectedrequest.requestId))}),a(4," Decline "),n()()}}function xe(e,i){if(e&1&&(r(0,"option",24),a(1),n()),e&2){let s=i.$implicit;p("value",s.id),c(),_(" ",s.categoryName," ")}}function he(e,i){if(e&1&&(r(0,"option",24),a(1),n()),e&2){let s=i.$implicit;p("value",s.id),c(),_(" ",s.assetName," ")}}function ve(e,i){if(e&1&&(r(0,"option",19),a(1,"Select Asset"),n(),m(2,he,2,2,"option",20)),e&2){let s=d(4);c(2),p("ngForOf",s.assetslist)}}function be(e,i){e&1&&(r(0,"option",19),a(1,"No available asset found"),n())}function Ce(e,i){if(e&1){let s=x();r(0,"div",17)(1,"h2"),a(2,"Asset Detail"),n(),r(3,"table")(4,"tr")(5,"td"),a(6,"Categories List"),n(),r(7,"td")(8,"select",18),g("change",function(t){u(s);let l=d(3);return f(l.getavailableassets(t))}),r(9,"option",19),a(10,"Select Category"),n(),m(11,xe,2,2,"option",20),n()()(),r(12,"tr")(13,"td"),a(14,"Asset List"),n(),r(15,"td")(16,"select",21),g("change",function(t){u(s);let l=d(3);return f(l.selectasset(t))}),m(17,ve,3,1)(18,be,2,0,"option",19),n()()(),r(19,"tr")(20,"td"),a(21,"Note"),n(),r(22,"td")(23,"input",22),R("ngModelChange",function(t){u(s);let l=d(3);return F(l.notes,t)||(l.notes=t),f(t)}),n()()()(),r(24,"button",23),g("click",function(){u(s);let t=d(3);return f(t.acceptrequest(t.selectedrequest.requestId))}),a(25," Assign Asset "),n()()}if(e&2){let s=d(3);c(11),p("ngForOf",s.categorylist),c(6),T(s.assetslist.length>0?17:18),c(6),V("ngModel",s.notes)}}function qe(e,i){if(e&1){let s=x();r(0,"div",10),g("click",function(t){u(s);let l=d(2);return f(l.stoppropagation(t))}),r(1,"div",11)(2,"h1"),a(3,"Request detail"),n(),r(4,"table")(5,"tr")(6,"td"),a(7,"Requested By"),n(),r(8,"td"),a(9),n()(),r(10,"tr")(11,"td"),a(12,"Description"),n(),r(13,"td"),a(14),n()()(),m(15,_e,5,0,"div",12),n(),m(16,Ce,26,3,"div",13),n()}if(e&2){let s=d(2);c(9),_(" ",s.selectedrequest.requesterUserName," "),c(5),_(" ",s.selectedrequest.requestDescription," "),c(),p("ngIf",s.selectedrequest.requestStatus=="PENDING"),c(),p("ngIf",s.isaccept)}}function ye(e,i){e&1&&v(0,"span",25)}function Se(e,i){if(e&1){let s=x();r(0,"div",8),g("click",function(){u(s);let t=d();return f(t.togglemodel())}),m(1,qe,17,4,"div",9)(2,ye,1,0,"ng-template",null,1,D),n()}if(e&2){let s=A(3),o=d();c(),p("ngIf",o.processed)("ngIfElse",s)}}function we(e,i){e&1&&v(0,"app-dataloading")}function Ee(e,i){if(e&1){let s=x();r(0,"tr",27),g("click",function(){let t=u(s).$implicit,l=d(2);return f(l.getbyid(t.requestId))}),r(1,"td"),a(2),n(),r(3,"td"),a(4),n(),r(5,"td"),a(6),n(),r(7,"td")(8,"div"),a(9),n()()()}if(e&2){let s=i.$implicit;c(2),b(s.requestId),c(2),b(s.requesterUserName),c(2),b(s.requestDescription),c(2),w(s.requestStatus),c(),b(s.requestStatus)}}function Ie(e,i){if(e&1&&(r(0,"table")(1,"thead")(2,"th"),a(3,"ID"),n(),r(4,"th"),a(5,"Request by"),n(),r(6,"th"),a(7,"Description"),n(),r(8,"th"),a(9,"Status"),n()(),r(10,"tbody"),m(11,Ee,10,6,"tr",26),n()()),e&2){let s=d();c(11),p("ngForOf",s.allrequest)}}var re=(()=>{let i=class i{constructor(o,t,l,q){this.dashboardservice=o,this.assetactionsservice=t,this.categoryservice=l,this.assetservice=q,this.isdataload=!1,this.assetId=void 0,this.isaccept=!1,this.ismodel=!1,this.processed=!0,this.categorylist=[],this.assetslist=[],this.selectedrequestid=0,this.allrequest=[],this.alert={type:"",lowermessage:"",upermessage:""},this.isalert=!1}ngOnInit(){this.getassetrequests(),this.loadCategories()}loadCategories(){this.categoryservice.getcategory().subscribe(o=>this.categorylist=o.responseData.$values,o=>console.log(o))}getassetrequests(){this.isdataload=!1,this.dashboardservice.getallrequests().subscribe(o=>{this.allrequest=o.responseData.$values,this.isdataload=!0},o=>console.log(o))}showaccept(o){this.isaccept=!0}togglemodel(){this.ismodel=!this.ismodel,this.isaccept=!1}selectasset(o){this.assetId=o.target.value}getavailableassets(o){let t=o.target.value;t>0?this.assetservice.getavailabelassetbycategory(t).subscribe(l=>this.assetslist=l.responseData.$values,l=>console.log(l)):this.assetslist=[]}acceptrequest(o){this.processed=!1;let t={assignedToId:this.selectedrequest.requesterId,assetId:this.assetId,notes:this.notes,requestId:this.selectedrequest.requestId};t.assetId==""||t.assetId==null?(this.isalert=!0,this.alert.type="warning",this.alert.upermessage="Warning",this.alert.lowermessage="Please fill all the fields",this.processed=!0,setTimeout(()=>{this.isalert=!1},3e3)):(console.log(t),this.assetactionsservice.fulfilledRequest(t).subscribe(l=>{this.isalert=!0,this.alert.type="success",this.alert.upermessage="Asset Assigned",this.alert.lowermessage=`Asset has been assigned to ${this.selectedrequest.requesterUserName}`,this.assetservice.getallasset().subscribe(q=>{}),this.getassetrequests(),this.togglemodel(),this.processed=!0,setTimeout(()=>{this.isalert=!1},3e3)},l=>{this.isalert=!0,this.alert.type="error",this.alert.upermessage="Something Went Wrong",this.alert.lowermessage="Please try again",this.processed=!0,setTimeout(()=>{this.isalert=!1},3e3),console.log(l)}))}declinerequest(o){this.processed=!1;let t={RequestId:o};this.assetactionsservice.declinerequest(t).subscribe(l=>{this.isalert=!0,this.alert.type="success",this.alert.upermessage="Asset Declined",this.alert.lowermessage="Asset has been Declined",this.getassetrequests(),this.togglemodel(),this.processed=!0},l=>{this.isalert=!0,this.alert.type="error",this.alert.upermessage="Something Went Wrong",this.alert.lowermessage="Please try again",this.processed=!0,setTimeout(()=>{this.isalert=!1},3e3),console.log(l)})}getbyid(o){this.selectedrequestid=o,this.selectedrequest=this.allrequest.find(t=>t.requestId===this.selectedrequestid),console.log(this.selectedrequest),this.togglemodel()}stoppropagation(o){o.stopPropagation()}};i.\u0275fac=function(t){return new(t||i)(h(ee),h(O),h(te),h(ie))},i.\u0275cmp=C({type:i,selectors:[["app-assetrequest"]],decls:8,vars:4,consts:[["table",""],["processing",""],["class","alert",4,"ngIf"],["class","requestdetail",3,"click",4,"ngIf"],[1,"container"],[4,"ngIf","ngIfElse"],[1,"alert"],[3,"alert"],[1,"requestdetail",3,"click"],["class","innerbody",3,"click",4,"ngIf","ngIfElse"],[1,"innerbody",3,"click"],[1,"assetrequestdetail"],["class","links",4,"ngIf"],["class","assetdetail",4,"ngIf"],[1,"links"],[1,"approve",3,"click"],[1,"decline",3,"click"],[1,"assetdetail"],["name","categories","id","categories",3,"change"],["value","-1","selected",""],[3,"value",4,"ngFor","ngForOf"],["name","asset","id","asset",3,"change"],["type","text","name","notes","id","notes",3,"ngModelChange","ngModel"],[1,"assignbtn",3,"click"],[3,"value"],[1,"loader"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,l){if(t&1&&(m(0,ge,2,1,"div",2)(1,Se,4,2,"div",3),r(2,"h1"),a(3,"All Request"),n(),r(4,"div",4),m(5,we,1,0,"app-dataloading",5)(6,Ie,12,1,"ng-template",null,0,D),n()),t&2){let q=A(7);p("ngIf",l.isalert),c(),p("ngIf",l.ismodel),c(4),p("ngIf",!l.isdataload)("ngIfElse",q)}},dependencies:[E,I,J,K,k,M,z,Z,ne],styles:['thead[_ngcontent-%COMP%]{background-color:#f1f4f9}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#fafafa}.PENDING[_ngcontent-%COMP%]{width:45%;text-align:center;padding:5px 10px;border-radius:5px;color:#ba29ff;background-color:#ba29ff33}.DECLINED[_ngcontent-%COMP%]{width:45%;text-align:center;padding:5px 10px;border-radius:5px;color:#ef3826;background-color:#ef382633}.FULFILLED[_ngcontent-%COMP%]{width:45%;text-align:center;padding:5px 10px;border-radius:5px;color:#00b69b;background-color:#00b69b33}.CANCELED[_ngcontent-%COMP%]{width:45%;text-align:center;padding:5px 10px;border-radius:5px;color:#ffa756;background-color:#ffa75633}.requestdetail[_ngcontent-%COMP%]{top:0;left:0;background-color:#0000001a;width:100%;height:100%;position:fixed;display:grid;place-items:center;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px)}.innerbody[_ngcontent-%COMP%]{display:block;background-color:#fff;padding:5% 10%;width:60%;border-radius:10px;animation:_ngcontent-%COMP%_updown .5s ease}@keyframes _ngcontent-%COMP%_updown{0%{transform:translateY(-100%)}to{transform:translateY(0)}}.assignbtn[_ngcontent-%COMP%]{border:none;font-size:1em;border-radius:5px;padding:5px 10px;background-color:#5380ff;color:#fff}.links[_ngcontent-%COMP%]{display:flex;gap:5px}.links[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-size:1em;border-radius:5px;padding:5px 10px}.links[_ngcontent-%COMP%]   .approve[_ngcontent-%COMP%]{background-color:#0fff0f33;color:green}.links[_ngcontent-%COMP%]   .decline[_ngcontent-%COMP%]{background-color:#ff0f0f33;color:red}.loader[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 1s infinite;height:50px;width:50px}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{border-radius:50%;content:"";display:block;height:20px;width:20px}.loader[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_ball1 1s infinite;background-color:#fff;box-shadow:30px 0 #5380ff;margin-bottom:10px}.loader[_ngcontent-%COMP%]:after{animation:_ngcontent-%COMP%_ball2 1s infinite;background-color:#5380ff;box-shadow:30px 0 #fff}.alert[_ngcontent-%COMP%]{left:0;position:fixed;width:100%;display:flex;justify-content:center;z-index:2}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0) scale(.8)}50%{transform:rotate(360deg) scale(1.2)}to{transform:rotate(720deg) scale(.8)}}@keyframes _ngcontent-%COMP%_ball1{0%{box-shadow:30px 0 #5380ff}50%{box-shadow:0 0 #5380ff;margin-bottom:0;transform:translate(15px,15px)}to{box-shadow:30px 0 #5380ff;margin-bottom:10px}}@keyframes _ngcontent-%COMP%_ball2{0%{box-shadow:30px 0 #fff}50%{box-shadow:0 0 #fff;margin-top:-20px;transform:translate(15px,15px)}to{box-shadow:30px 0 #fff;margin-top:0}}']});let e=i;return e})();var oe=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=C({type:i,selectors:[["app-createrequests"]],decls:2,vars:0,template:function(t,l){t&1&&(r(0,"p"),a(1,"createrequests works!"),n())}});let e=i;return e})();var ke=[{path:"yourrequests",component:se},{path:"assetrequests",component:re},{path:"create",component:oe},{path:"**",redirectTo:"yourrequests",pathMatch:"full"}],ae=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=S({type:i}),i.\u0275inj=y({imports:[N.forChild(ke),N]});let e=i;return e})();var nt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=S({type:i}),i.\u0275inj=y({imports:[L,ae,X,Q]});let e=i;return e})();export{nt as RequestModule};
